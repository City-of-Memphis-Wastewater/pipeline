# syntax=docker/dockerfile:1.4
ARG PYTHON_VERSION=3.12-slim
FROM python:${PYTHON_VERSION}

WORKDIR /app

# Install essential tools
RUN apt-get update && apt-get install -y bash curl git \
    && rm -rf /var/lib/apt/lists/*

# Install uv
RUN pip install --no-cache-dir uv

# Copy full project (including source â€” dev needs everything)
COPY . .

# Install all dependencies including dev groups/extras
# Use --all-extras if you use optional-dependencies, or --with dev if using dependency-groups
# Adjust based on your pyproject.toml structure
RUN uv sync --all-extras --all-groups

# Expose port for dev servers
EXPOSE 8000

# Drop into interactive bash by default (great for dev containers)
ENTRYPOINT ["bash"]
