(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const m of o.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();let s,l,a,p,u,d,f;const E=document.getElementById("scaleFactor"),b=document.getElementById("scaleValue"),L=document.getElementById("peakOutput"),c=document.getElementById("three-js-container"),R=document.getElementById("echarts-container"),h=document.getElementById("three-loading-indicator");let y=[5,20,36,10,10,20],T=["P1","P2","P3","P4","P5","P6"];const H="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Duck/glTF-Binary/Duck.glb";function M(){s=new THREE.Scene,s.background=new THREE.Color(3355443);const n=c.clientWidth/c.clientHeight;l=new THREE.PerspectiveCamera(75,n,.1,1e3),l.position.set(2,2,4),a=new THREE.WebGLRenderer({antialias:!0}),a.setSize(c.clientWidth,c.clientHeight),a.setPixelRatio(window.devicePixelRatio),c.appendChild(a.domElement);const e=new THREE.AmbientLight(16777215,.7);s.add(e);const r=new THREE.DirectionalLight(16777215,.5);r.position.set(5,5,5),s.add(r);const i=new THREE.SphereGeometry(1,32,32),t=new THREE.MeshPhongMaterial({color:31743,shininess:30});u=new THREE.Mesh(i,t),u.position.set(-1.5,0,0),s.add(u),p=new THREE.OrbitControls(l,a.domElement),p.enableDamping=!0,P(),w()}function P(){h.classList.remove("hidden"),new THREE.GLTFLoader().load(H,e=>{d=e.scene,d.position.set(1.5,0,0),d.scale.set(.5,.5,.5),s.add(d),h.classList.add("hidden"),g(E.value)},e=>{},e=>{console.error("An error occurred loading the GLB model:",e),h.classList.add("hidden");const r=new THREE.BoxGeometry(1,1,1),i=new THREE.MeshPhongMaterial({color:16711680}),t=new THREE.Mesh(r,i);t.position.set(1.5,0,0),s.add(t),g(E.value)})}function w(){requestAnimationFrame(w),p.update(),a.render(s,l)}function S(){f=echarts.init(R);const n={title:{text:"Structural Stress Distribution",left:"center",textStyle:{color:"#333",fontSize:16}},tooltip:{},xAxis:{data:T,axisLabel:{color:"#666"}},yAxis:{axisLabel:{color:"#666"}},series:[{name:"Value",type:"bar",data:y,itemStyle:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#83bff6"},{offset:.5,color:"#188df0"},{offset:1,color:"#188df0"}])}}]};f.setOption(n)}function g(n){const e=parseFloat(n);if(u){u.scale.set(e/3,e/3,e/3);const o=Math.min(1,e/10),m=new THREE.Color(1,1-o,1-o);u.material.color.set(m)}if(d){const o=e/3*.5;d.scale.set(o,o,o)}const r=.5+e/10,i=y.map(o=>Math.round(o*r*10)/10),t=Math.max(...i).toFixed(1);f&&f.setOption({series:[{data:i}],title:{text:`Structural Stress Distribution (Factor: ${e.toFixed(1)})`}}),b.textContent=e.toFixed(1),L.textContent=t}E.addEventListener("input",n=>{g(n.target.value)});function x(){if(a&&l&&c){const n=c.clientWidth,e=c.clientHeight;l.aspect=n/e,l.updateProjectionMatrix(),a.setSize(n,e)}f&&f.resize()}window.addEventListener("resize",x,!1);window.onload=function(){M(),S(),x()};
